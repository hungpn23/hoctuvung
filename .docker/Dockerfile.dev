FROM node:24-alpine3.23

RUN npm i -g pnpm
RUN npm i -g @nestjs/cli
RUN corepack enable

WORKDIR /app

COPY --chown=node:node . .

USER node
RUN corepack prepare pnpm@10.28.0 --activate